
AC_INIT(gtt)

AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(gnome-utils, 0.12)
AC_SUBST(GNOME_LIBS)
AC_SUBST(GNOMEUI_LIBS)
AC_SUBST(GTKXMHTML_LIBS)

AM_MAINTAINER_MODE
AM_ACLOCAL_INCLUDE(macros)

dnl
dnl Load the gnome-libs configuration informatio 
dnl
if test -e $prefix/lib/gnomeConf.sh; then
    AC_MSG_CHECKING(Loading gnomeConf.sh values)
    . $prefix/lib/gnomeConf.sh
else
    AC_MSG_ERROR(Could not find the gnomeConf.sh file that is generated by gnome-libs install)
fi

AC_ISC_POSIX
AC_PROG_CXX
AC_PROG_CC
AC_PROG_CPP
AC_STDC_HEADERS
AC_ARG_PROGRAM
AM_PROG_LIBTOOL
AC_PROG_LEX
AC_DECL_YYTEXT
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_MAKE_SET

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_C_INLINE
AC_TYPE_OFF_T
AC_TYPE_PID_T
AC_TYPE_SIZE_T
AC_STRUCT_ST_RDEV
AC_HEADER_TIME
AC_STRUCT_TM
AC_TYPE_UID_T

dnl Checks for library functions.
AC_FUNC_ALLOCA
AC_FUNC_MMAP
AC_TYPE_SIGNAL
AC_FUNC_STRFTIME
AC_CHECK_FUNCS(getcwd gettimeofday getwd putenv strdup strtoul uname)

GNOME_CHECK_GUILE

ALL_LINGUAS=""
AM_GNU_GETTEXT

dnl genius
PROGRAMS_GENIUS=""
AC_CHECK_LIB(gmp, mpz_init_set,[
   AC_PROG_LEX
   AC_PROG_YACC
   PROGRAMS_GENIUS=genius])
AC_SUBST(PROGRAMS_GENIUS)

dnl gtop
PROGRAMS_GTOP=""
AC_CHECK_HEADERS(linux/tasks.h,[PROGRAMS_GTOP=gtop])
AC_SUBST(PROGRAMS_GTOP)

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)

AC_OUTPUT([
Makefile
po/Makefile.in
cromagnon/Makefile
find-file/Makefile
genius/Makefile
gncal/Makefile
gtop/Makefile
gtop/proc/Makefile
gtt/Makefile
notepad/Makefile
version.h
stamp.h],[sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile])
