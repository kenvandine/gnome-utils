2000-07-30  Adrian Johnston

	* Major code rewrite and cleanup.  Wrote a set of hooks with an api
	for converting any permission granting util into the "gsu-suid"
	executable.  This was formerly provided by gsu-helper.c.  Provided
	a general purpose function for a client to call the suid code.  This
	is useful for writing any admin tool that shouldn't run as root,
	but wants to call a command as such.  

	Providing gsu-suid will require patching the local su/sudo/whatever.
	This is a Good Thing as it puts responsibility for something this
	serious where it belongs: the distribution.  We don't just build
	a suid executable that people will start using without looking at.

	* Wrote a libglade interface.

2000-02-27  Vince Hodges  <vhodges@home.com>

	* gsu-lib.c (fill_command_args): Added function to fill in args array.
	(gsu_getpass): If user is null, assumes root.
	(gsu_call_helper): Now calls gsu_get_helper().  Passes command line args
	to gsu-helper. Wrapped traces in a debug macro. Added code to check to see
	if we're already root and only ask for a password if we're not.  Initialized
	password variable to "". Now calls execv() with an appropriatly initialized
	argument array.

	* gsu-test.c: Added command line arguments to pass to
	gsu-helper.

	* gsu-lib.h: Added prototype for gsu_call_helper.  Added debug macro.

	* gsu-helper.c:  undef'd USE_PAM.  It seems broken on my machine.  When I 
	have more time, I'll look into this.  Rearranged some of the code so that
	it would compile with USE_PAM not defined.

1999-07-28  Zbigniew Chyla <chyla@alice.ci.pwr.wroc.pl>

	* gsu-lib.c, gsu.c : Use g_strdup_printf instead of g_strconcat for
	translatable strings (makes it easier to translate).

1999-04-11  Martin Baulig  <martin@home-of-linux.org>

	* gsu-lib.c (gsu_get_helper): This is now global, not static.
	(gsu_getpass): Likewise.

	* gsu-helper.c: Added error pipe; we set close-on-exec on the message
	pipe so it will be closed when we exec () the shell. From that point
	on we use the error pipe to write error messages.

1999-04-09  Martin Baulig  <martin@home-of-linux.org>

	Added CORBA interface to gsu.

	* gsu-impl.c, gsu-impl.h: New files containing CORBA implementation.
	* gsu-server.c: This is the CORBA server.
	* gsu-test-server.c: Test program to test server.
	* gsu.gnorba: New file. Goad description file.

1999-02-25  Martin Baulig  <martin@home-of-linux.org>

	* gsu-helper.c (helper_read_password): Security fix from
	Chris Evans: use `size_t' for len, not `int' and avoid any
	integer overflows.

1999-02-10  Martin Baulig  <martin@home-of-linux.org>

	* gsu-lib.c (gsu_call_helper): New file. Use the `gsu_call_helper'
	function to call the gsu-helper.

	* gsu-test.c: New file for testing only.

1999-02-10  Martin Baulig  <martin@home-of-linux.org>

	* gsu-helper.c (passwd_fd): This is the number of an open file
	descriptor which we use to read the password from.
	(message_fd): This is the number of an open file descriptor which
	we use to pass a message to our parent.
	(helper_abort): Abort on fatal errors.
	(helper_io_error): Print an error message to stderr and abort.
	(helper_error): This is a modified error () that passes the error
 	text to our parent.
	(helper_read_password): If not using PAM, we use this function to
	read the password.
	(correct_password): Read the password from the password_fd.

1999-02-10  Martin Baulig  <martin@home-of-linux.org>

	* xmalloc.c, xstrdup.c: New files from sh-utils 1.16.

1999-02-09  Martin Baulig  <martin@home-of-linux.org>

	* gsu-helper.c: New file. This is a modified version of /bin/su
	which we use a suid helper application.

	* system.h: New file. This is taked unchanged from sh-utils 1.16.

1999-02-09  Tomas Ogren  <stric@ing.umu.se>

	* gsu.c: #include <errno.h> as well..

Tue Apr 21 19:37:40 1998  Havoc Pennington  <hp@pobox.com>

	* gsu.c: Replaced error() calls, since some systems don't have
	this (it comes with GNU shellutils, so the original su source
	used it freely). Reported by Sebastian Wilhelmi.

